# Checks
Данный репозиторий содержит две программы:

* `checks/__main__.py` — Программа для сохранения информации чеков.
* `telegram.py` — Программа-бот для переадресации консольных команд между Telegram пользователем и программами (в данном случае `checks.py`)

Цель системы в том, чтобы пользователь мог вносить фактические данные о транзакциях. Предполагается, что анализировать эти данные может другая система, например ElasticSearch в связке с Kibana.

У программы checks первый аргумент принимается идентификатор пользователя. Фактически для того, чтобы разделять файлы на разных пользователей.
Данная возможность также может быть безопаснее, если запускать программу с разными группами прав Linux, однако для этого требуется создание пользователей,
а следовательно и root права. Из-за того, что Telegram расположен на моём планшете Android без root прав, был реализован данный способ разделения данных пользователей.

## Пример запуска

### Unix like

```bash
./telegram.py
```

### WindowsNT

```cmd
python3 telegram.py
```

## Переменные среды

| Название               | Значение по-умолчанию                 | Допустимые значения                          | Описание   |
|------------------------|---------------------------------------|----------------------------------------------|------------|
| `CHECKS_OUTPUT_FOLDER` | `./data/`                             | any path example `./data`                    | Место, куда записываются результаты сбора данных.
| `TELEGRAM_SECRET_PATH` | `./secret.json5`                      | any path example `/run/checks/secret.json5`  | Место в файловой системе, где хранятся секретные настройки.
| `TELEGRAM_EXECUTE_APP` | `["python3", "./checks/__main__.py"]` | json array params                            | Команда запуска которая вызывается когда пишешь боту в Телеграм. Передаётся массивом в формате json5.
| `LOGURU_LEVEL`         | `DEBUG`                               | `TRACE`, `DEBUG`, `INFO`, `WARNING`, `ERROR` | Уровень журналирования информации в консоль.
